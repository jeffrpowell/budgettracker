{% extends "budget/base.html" %}

{% block breadcrumb %}
	<li><a href="{% url 'budget:category' account.category.id %}">{{ account.category.name }}</a></li>
	<li class="active"><a href="{% url 'budget:account' account.id %}">{{ account.name }}</a></li>
{% endblock %}

{% block content %}
	<div class="row">
		<div class="col-xs-9">
			<h2>Transactions for {{ account.name }}</h2>
			<br />
			<table class="table">
			<tr><th>Date</th><th>Account</th><th>Deposit</th><th>Withdrawal</th><th>Memo</th><th>Edit</th></tr>
			{% for t in transactions %}
				<tr><td>{{ t.date }}</td>
				{% if t.to_account|cut:" " == account.name|cut:" " %}
					<td><a href="{% url 'budget:account' t.from_account.id %}">{{ t.from_account }}</a></td><td>${{ t.amount }}</td><td></td>
				{% else %}
					<td><a href="{% url 'budget:account' t.to_account.id %}">{{ t.to_account }}</a></td><td></td><td>${{ t.amount }}</td>
				{% endif %}
				<td>{{ t.memo }}</td>
				<td><a href="{% url 'budget:transaction' t.id account.id %}">Edit</a></td></tr>
			{% endfor %}
			<tr><td></td><td><strong>Monthly Balance:</strong></td><td>${{ balance }}</td><td colspan="3"></td></tr>
			<tr><td></td><td><strong>Overall Balance:</strong></td><td>${{ account.balance }}</td><td colspan="3"></td></tr>
			</table>
		</div>
		<div class="col-xs-3 text-center">
			<h3>Select Date</h3>
			{% include "budget/month_selection.html" %}
			<br />
			{% if bank %}
			<a href="{% url 'budget:banktransaction' %}" class="btn btn-success">Transfer Funds</a>
			{% else %}
			<a href="{% url 'budget:addtransaction' account.id %}" class="btn btn-success">Add New Transaction</a>
			{% endif %}
		</div>
	</div>
{% endblock %}

{% block javascript %}
	<script src="/static/budget/js/month_selection.js" type="text/javascript"></script>
{% endblock %}
